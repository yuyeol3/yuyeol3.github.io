# 20040 - 사이클 게임

이 문제는 사이클 게임을 할 때, 사이클 게임에서 사이클이 몇 번째 차례에서 완성되었는지 판별해야 하는 문제이다. 여기서 사이클 게임이란 두 플레이어가 번갈아가며 n개의 점에 대해 선분을 긋는 게임으로, 사이클이 완성되면 게임이 종료된다. 

이 문제에서 플레이어들이 그은 선분이 사이클을 이루는 순간을 어떻게 인식할 수 있을까? 먼저 사이클이 어떤 특성을 갖는지부터 생각해보자. 어떤 점을 선분으로 연결했을 때, 그 선분들이 사이클을 이룬다면, 어떤 점을 시작점으로 잡았을 때 선분을 타고 계속 이동하다 보면 최종적으로 시작점에 다시 도달하게 된다. 즉 시작점이 아니면서 사이클을 이루는 임의의 점은 앞으로 이동하든 뒤로 이동하든 시작점에 도달한다. 

위 탐구 내용을 바탕으로 사이클이 생성되는 조건을 잘 생각해보자. 어떤 점이 이미 임의의 시작점 s로 이동할 수 있고, 동시에 새 선분을 통해 다시 s와 연결될 때 사이클이 생긴다는 것을 알 수 있다. 따라서 기존에 연결된 점들의 시작점이 어디인지 관리해두면서, 선분에 의해 새로 연결되는 두 점의 시작점이 서로 같다면 


[🔗 문제 링크](https://boj.kr/20040)

## 코드

## 전체 코드

```java
import java.util.*;
import java.io.*;

class Main {
    static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

    static int[] parent;

    static void init(int n) {
        parent = new int[n];
        for (int i = 0; i < n; i++) {
            parent[i] = i;
        }
    }

    static void union(int a, int b) {
        int rootA = find(a);
        int rootB = find(b);

        parent[rootB] = rootA;
    }

    static int find(int x) {
        if (x == parent[x]) return x;
        parent[x] = find(parent[x]);
        return parent[x];
    }

    public static void main(String[] args) throws IOException {
        // 이미 루트가 x인 애가 또 연결되면 사이클이 완성
        StringTokenizer st = new StringTokenizer(br.readLine());

        int n = Integer.parseInt(st.nextToken());
        int m = Integer.parseInt(st.nextToken());

        init(n);
        for (int i = 0; i < m; i++) {
            st = new StringTokenizer(br.readLine());
            int a = Integer.parseInt(st.nextToken());
            int b = Integer.parseInt(st.nextToken());

            if (find(a) == find(b)) {
                System.out.println(i+1);
                return;
            }

            union(a, b);
        }
        System.out.println(0);
    }
}
```

## 시간복잡도

