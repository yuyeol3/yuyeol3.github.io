# 11660 - 구간 합 구하기

이 문제는 누적 합을 잘 사용해야 하는 문제이다. 문제 내용을 살펴보면, $N \times N$ 크기의 2차원 표를 입력받아 $M$개의 2차원 구간합을 구하는 것이 목표이다. 그런데 만약 표를 입력받아 순회하며 합을 구하는 방식으로 단순히 구현하면 최악의 경우 `100000 * 1024 * 1024`번(1천억 번) 연산하므로 시간초과가 날 것이다. 

이 문제를 푸는 방법은 구간합을 잘 이용하는 것이다. 구간합 테이블의 $(i, j)$ 번째 원소를 $(1,1)$ 부터 $(i, j)$ 까지 모든 원소들의 합으로 정의하자. 그렇다면 $(i, j)$ 번째 원소는 다음과 같이 얻을 수 있다.

$$ \text{prefixSum}[i][j] = \text{table}[i][j] + \text{prefixSum}[i-1][j] + \text{prefixSum}[i][j-1] - \text{prefixSum}[i-1][j-1]$$

여기서 마지막 항에 $- \text{prefixSum}[i-1][j-1]$가 붙은 이유는 $\text{prefixSum}[i-1][j] + \text{prefixSum}[i][j-1]$ 을 더하면 prefixSum의 $(i-1, j-1)$번째 원소는 두 번 더해지기 때문이다. 이는 마치 집합에서 합집합의 원소를 구할 때 쓰는 포함-배제 원리와 유사하다고 생각하면 된다.

