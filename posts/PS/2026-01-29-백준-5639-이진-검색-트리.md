# 5639 - ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬

ì´ ë¬¸ì œì—ì„œëŠ” ì–´ë–¤ ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬(Binary Search Tree)ì˜ ì „ìœ„ ìˆœíšŒ ê²°ê³¼ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, í›„ìœ„ ìˆœíšŒí•œ ê²°ê³¼ë¥¼ ì•Œì•„ë‚´ ì¶œë ¥í•´ì•¼ í•œë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ë‹¨ìˆœíˆ ì…ë ¥ë°›ì€ ëŒ€ë¡œ ì´ì§„ íŠ¸ë¦¬ì— ì¶”ê°€í•´ ë³µì›í•œ ë’¤, í›„ìœ„ ìˆœíšŒë¥¼ í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¤ë§Œ ìµíˆ ì•Œë ¤ì ¸ ìˆë“¯, ì´ ë°©ì‹ì˜ ë¬¸ì œëŠ” í•œ ìª½ìœ¼ë¡œ í¸í–¥ëœ íŠ¸ë¦¬ê°€ ì£¼ì–´ì§ˆ ê²½ìš° ì‹œê°„ë³µì¡ë„ê°€ $O(N^2)$ ê¹Œì§€ ë  ìˆ˜ ìˆë‹¤. ì „ìœ„ ìˆœíšŒì˜ ì„±ì§ˆì„ ì´ìš©í•˜ì—¬, ë” ë¹ ë¥¸ ì‹œê°„ë³µì¡ë„ë¥¼ ë³´ì¥í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì§¤ ìˆ˜ëŠ” ì—†ì„ê¹Œ?  

<img width="100%"  alt="image" src="https://github.com/user-attachments/assets/02cf018e-7366-4fb3-ae5f-2650bd65e053" />


ì „ìœ„ ìˆœíšŒì˜ ê³¼ì •ì„ ì˜ ì‚´í´ë³´ë©´, ë¨¼ì € root ë…¸ë“œë¶€í„° left ë°©í–¥ìœ¼ë¡œ ëê¹Œì§€ ë‚´ë ¤ê°„ ë’¤, ê·¸ ë‹¤ìŒìœ¼ë¡œ right ë…¸ë“œë“¤ì„ ë°©ë¬¸í•˜ëŠ” ì‹ì¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë˜í•œ BST(ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬)ì—ì„œ, ë¶€ëª¨ ë…¸ë“œì—ì„œ left ìì‹ì€ ë¶€ëª¨ ë…¸ë“œë³´ë‹¤ ì‘ì€ ê°’ì´ê³ , right ìì‹ì€ ë¶€ëª¨ë³´ë‹¤ í° ê°’ì´ë‹¤. ì´ ë‘ ì‚¬ì‹¤ì„ ì¢…í•©í•˜ë©´, BSTë¥¼ ì „ìœ„ìˆœíšŒ í–ˆì„ ë•Œ ìˆ«ìì˜ ìˆœì„œê°€ ì‘ì•„ì§€ë‹¤ê°€ ì»¤ì¡Œë‹¤ë©´ ê·¸ ìˆ«ìëŠ” ì–´ë–¤ ë…¸ë“œì˜ right ìì‹ì´ê³ , ê·¸ right ìì‹ì˜ ë¶€ëª¨ ë…¸ë“œëŠ” ìì‹ (right ë…¸ë“œ)ë³´ë‹¤ í° ìˆ«ìì˜ ë…¸ë“œì˜ left ìì‹ì´ë‹¤. 

ìœ„ ì‚¬ì‹¤ì„ ì´ìš©í•˜ë©´ $O(N)$ì— ë™ì‘í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì§¤ ìˆ˜ ìˆë‹¤. 

[ğŸ”— ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/5639)

## ì½”ë“œ

í´ë˜ìŠ¤ `Node`ë¥¼ ì„ ì–¸í•œë‹¤. ì´ í´ë˜ìŠ¤ì—ëŠ” left childì™€ right childì˜ ì°¸ì¡°ë¥¼ ê¸°ë¡í•´ë‘˜ `left`, `right`ì™€ í˜„ì¬ ë…¸ë“œì˜ ë²ˆí˜¸ë¥¼ ê¸°ë¡í•´ë‘˜ `num`ì„ ë©¤ë²„ ë³€ìˆ˜ë¡œ ì„ ì–¸í•œë‹¤.

```java
static class Node {
    Node left = null;
    Node right = null;
    int num;
    public Node(int num) {
        this.num = num;
    }
}
```

íŠ¸ë¦¬ì˜ root ë…¸ë“œë¥¼ ì €ì¥í•  ë³€ìˆ˜ `tree`ì™€ ë“¤ì–´ì˜¨ ë…¸ë“œë“¤ì„ ì¶”ì í•˜ê¸° ìœ„í•œ ìŠ¤íƒ `stk`ë¥¼ ì„ ì–¸í•œë‹¤. root ë…¸ë“œëŠ” ê°€ì¥ ë¨¼ì € ë“¤ì–´ì˜¨ ìˆ«ìì´ë¯€ë¡œ `root = Integer.parseInt(br.readLine())`ë¡œ ì €ì¥í•´ ë‘”ë‹¤. íŠ¸ë¦¬ì™€ ìŠ¤íƒì— root ë…¸ë“œë¥¼ ì‚½ì…í•œë‹¤.

```java
public static void main(String[] args) throws IOException {
    Deque<Node> stk = new ArrayDeque<>();
    int root = Integer.parseInt(br.readLine());
    Node tree = new Node(root);
    stk.addFirst(tree);
```

ë‚˜ë¨¸ì§€ ìˆ«ìë“¤ì„ ì…ë ¥ë°›ìœ¼ë©° íŠ¸ë¦¬ë¥¼ ê³„ì† ë³µì›í•œë‹¤. ì•ì„œ ë§í–ˆë“¯ ì§€ê¸ˆ ë“¤ì–´ì˜¨ ìˆ«ìê°€ `stk.peek()`ë³´ë‹¤ ì‘ë‹¤ë©´ ê·¸ ìˆ«ìë¥¼ ì´ì „ ë…¸ë“œì˜ left childë¡œ ê°„ì£¼í•˜ë©´ ëœë‹¤. ë°˜ëŒ€ë¡œ ë§Œì•½ ë“¤ì–´ì˜¨ ìˆ«ìê°€ `stk.peek()`ë³´ë‹¤ í¬ë‹¤ë©´ right childìœ¼ë¡œ ë¶™ì—¬ì•¼ í•œë‹¤. ë”°ë¼ì„œ ë“¤ì–´ì˜¨ ìˆ«ìë³´ë‹¤ `stk.peek()`ê°€ ì‘ì€ ë™ì•ˆ ê³„ì† ìŠ¤íƒì—ì„œ ë…¸ë“œë¥¼ ëº€ ë’¤, ê°€ì¥ ë§ˆì§€ë§‰ìœ¼ë¡œ ëº€ ë…¸ë“œë¥¼ parent ë…¸ë“œë¡œ ê°„ì£¼í•˜ê³  rightì— ë“¤ì–´ì˜¨ ìˆ«ìë¥¼ ë…¸ë“œë¡œ ë§Œë“¤ì–´ ë¶™ì´ë©´ ëœë‹¤. ê·¸ëŸ° ë‹¤ìŒ ê³µí†µì ìœ¼ë¡œ ìŠ¤íƒì— ë“¤ì–´ì˜¨ ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•œë‹¤.

```java
    while (true) {
        String numStr = br.readLine();
        if (numStr == null) break;
        int num = Integer.parseInt(numStr);
        if (num < stk.peek().num) {
            stk.peek().left = new Node(num);
            stk.addFirst(stk.peek().left);
        }
        else {
            Node parent = stk.pollFirst();
            while (!stk.isEmpty() && num > stk.peek().num) {
                parent = stk.pollFirst();
            }
            parent.right = new Node(num);
            stk.addFirst(parent.right);
        }
    }
```

ë°˜ë³µë¬¸ì„ ë¹ ì ¸ë‚˜ì™”ë‹¤ë©´ íŠ¸ë¦¬ ë³µì›ì´ ì™„ë£Œëœ ê²ƒì´ë‹¤. ì´ì œ ë³µì›ëœ íŠ¸ë¦¬ë¥¼ í›„ìœ„ ìˆœíšŒí•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤. í›„ìœ„ ìˆœíšŒë¥¼ ìœ„í•œ ìŠ¤íƒì„ í•˜ë‚˜ ë§Œë“¤ê³  ë£¨íŠ¸ ë…¸ë“œë¥¼ ê°€ì¥ ë¨¼ì € ìŠ¤íƒì— ë„£ëŠ”ë‹¤. ê·¸ëŸ° ë‹¤ìŒ ìŠ¤íƒì´ ë¹Œ ë•Œê¹Œì§€ ì‘ì—…ì„ ë°˜ë³µí•œë‹¤. ë¨¼ì € ìŠ¤íƒì—ì„œ ìµœìƒë‹¨ ê°’ì„ í™•ì¸í•œë‹¤. ê·¸ëŸ° ë‹¤ìŒ ê·¸ ë…¸ë“œì˜ left childì™€ right childê°€ ëª¨ë‘ nullì´ë¼ë©´ `sb`ì— ê·¸ ë…¸ë“œì˜ ê°’ì„ ì¶”ê°€í•˜ê³  ìŠ¤íƒì—ì„œ ë…¸ë“œë¥¼ ì œê±°í•œ ë’¤ ë°˜ë³µë¬¸ì„ ë‹¤ìŒ ë‹¨ê³„ë¡œ ê±´ë„ˆë›´ë‹¤. 

ë§Œì•½ ë‘˜ ì¤‘ í•˜ë‚˜ë¼ë„ nullì´ ì•„ë‹ˆì—ˆë‹¤ë©´, ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°„ë‹¤. ë§Œì•½ `s.left`ê°€ nullì´ ì•„ë‹ˆë¼ë©´ left ë…¸ë“œë¥¼ ìŠ¤íƒì— ì¶”ê°€í•œ ë’¤, `s.left`ë¥¼ nullë¡œ ë§Œë“ ë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ `s.left`ëŠ” nullì´ê³  `s.right`ê°€ nullì´ ì•„ë‹ˆë¼ë©´ right ë…¸ë“œë¥¼ ìŠ¤íƒì— ë„£ê³  `s.right`ë¥¼ nullë¡œ ë§Œë“ ë‹¤.

```java
    Deque<Node> stk2 = new ArrayDeque<>();
    stk2.add(tree);
    
    while (!stk2.isEmpty()) {
        Node s = stk2.peek();
        if (s.left == null && s.right == null) {
            sb.append(s.num).append("\n");
            stk2.pollFirst();
            continue;
        }

        if (s.left != null) {
            stk2.addFirst(s.left);
            s.left = null;
        }
        else if (s.right != null) {
            stk2.addFirst(s.right);
            s.right = null;
        }
    }
```

ë§ˆì§€ë§‰ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ê³  í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•œë‹¤.

```java
    System.out.print(sb);
}
```

## ì „ì²´ ì½”ë“œ

```java
import java.io.*;
import java.util.*;

class Main {
    static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    static StringBuilder sb = new StringBuilder();
    static class Node {
        Node left = null;
        Node right = null;
        int num;
        public Node(int num) {
            this.num = num;
        }
    }

    public static void main(String[] args) throws IOException {

        Deque<Node> stk = new ArrayDeque<>();
        int root = Integer.parseInt(br.readLine());
        Node tree = new Node(root);
        stk.addFirst(tree);
        while (true) {
            String numStr = br.readLine();
            if (numStr == null) break;
            int num = Integer.parseInt(numStr);
            if (num < stk.peek().num) {
                stk.peek().left = new Node(num);
                stk.addFirst(stk.peek().left);
            }
            else {
                Node parent = stk.pollFirst();
                while (!stk.isEmpty() && num > stk.peek().num) {
                    parent = stk.pollFirst();
                }
                parent.right = new Node(num);
                stk.addFirst(parent.right);
            }
        }

        Deque<Node> stk2 = new ArrayDeque<>();
        stk2.add(tree);
        
        while (!stk2.isEmpty()) {
            Node s = stk2.peek();
            if (s.left == null && s.right == null) {
                sb.append(s.num).append("\n");
                stk2.pollFirst();
                continue;
            }

            if (s.left != null) {
                stk2.addFirst(s.left);
                s.left = null;
            }
            else if (s.right != null) {
                stk2.addFirst(s.right);
                s.right = null;
            }
        }
        System.out.print(sb);
    }
}
```

## ì‹œê°„ë³µì¡ë„

íŠ¸ë¦¬ë¥¼ ë³µì›í•˜ëŠ” ì‹œê°„ë³µì¡ë„ëŠ” ì•ì„œ ì„¤ëª…í–ˆë“¯ $O(N)$ì´ ê±¸ë¦¬ë©°, íŠ¸ë¦¬ë¥¼ ìˆœíšŒí•˜ëŠ” ì‹œê°„ë³µì¡ë„ë„ $O(N)$ì´ë‹¤. ë”°ë¼ì„œ ì´ í”„ë¡œê·¸ë¨ì˜ ì‹œê°„ë³µì¡ë„ëŠ” ì´ $O(N)$ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.
